  package Assign_6; 


  import BasicIO.*;                
  import static BasicIO.Formats.*; 
  import static java.lang.Math.*;



  public class Census { 
  
  private ASCIIDataFile      addData;
  private BasicForm          household;
  private BasicForm          person;
  private ASCIIOutputFile    cendata;    
  String                     address;                
  int                        numPeople ; 
  int                        numMale;
  int                        numFemale ;                       
  int                        numE ;   
  int                        numF;
  int                        numOther ;                    
  int                        num;                                 
  
  
  public Census ( ) { 
    
    addData = new ASCIIDataFile();
    household = new BasicForm("OK","Skip");
    person = new BasicForm();
    cendata = new ASCIIOutputFile();
    buildHouseholdForm();
    buildIndividualForm();
    for( ; ;){
      address = addData.readString();
      if (addData.isEOF()  )  break;
      processHousehold(address);
    }    
    
    addData.close();
    cendata.close();
    household.close(); 
    person.close();
  };  
  
  private void processHousehold(String address){
    
    
    int button;                                
    
    fillHouseholdForm(address);
    button = household.accept();  
    numPeople = household.readInt("numPeople");
    if( button == 0){    
      for (  int i = 1; i<=numPeople; i++){ 
        person.clearAll();
        num =i;
        processPerson();  
      }     
      
      writeCensus( address, numPeople,  numMale,  numFemale,  numE,  numF,  numOther  
                 );
      
    }    
  }
  
  private void processPerson(){
    
    
    String name;                                                          
    int    sex;                                 
    int    lang; 
    int    age;
    
    fillPersonForm(num);
                 
    person.accept();
    name = person.readString("name"); 
    sex = person.readInt("sex");
    lang = person.readInt("lang");
    age = person.readInt("age");
    
    if ( sex == 0){
      numMale = numMale+1;
    }
    else {
      numFemale =numFemale+1;
    }
    lang = person.readInt("lang");
    if ( lang == 0){
      numE= numE+1;
    }
    else {
      if  (lang == 1){
        numF = numF +1;
      }      
      else {
        numOther= numOther+1;
      }    }    
  }//processPerson
  
  private void buildHouseholdForm ( ) { 
    household.setTitle("Household"); 
    household.addTextField("addr","Address",20,10,10);    
      household.setEditable("addr",false); 
    household.addTextField("numPeople","# People",2,10,50);
  } 
  
  private void buildIndividualForm ( ) { 
    person.setTitle("Individual"); 
    person.addTextField("num","Person",2,10,10); 
    person.setEditable("num",false); 
    person.addTextField("name","Name",20,10,50); 
    person.addTextField("age","Age",3,10,80); 
    person.addRadioButtons("sex","Sex",false,10,110,"Male","Female"); 
    person.addRadioButtons("lang","Language",false,10,160, 
                           "English","French","Other"); 
  }
  
  private void fillHouseholdForm( String address){
    household.clearAll();
    household.writeString("addr", address);
    
  }
  private void fillPersonForm(int num){
    person.clearAll();
    person.writeInt("num",num);
  
  }
 
  private void writeCensus (String address,int numPeople, int numMale, int numFemale, int  numE, int numF, 
                            int numOther  ) {
    cendata.writeString(address); 
    cendata.writeInt(numPeople);
    cendata.writeInt(numMale);
    cendata.writeInt(numFemale);
    cendata.writeInt(numE);
    cendata.writeInt(numF);
    cendata.writeInt(numOther);
    cendata.newLine();
  } 
  public static void main ( String[] args ) { Census c = new Census(); }; 
}  
